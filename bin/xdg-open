#!/usr/bin/env bash

set -euo pipefail

usage="Usage: $(basename "$0") [-h|--help] {file | URL}
Opinionated proxy for xdg-open.
- Opens Google Meet links in Chrome (if it's installed) in app mode

Flags:
	-h, --help		show this help text"

if [ "$1" = "-h" ] || [ "$1" = "--help" ]; then
	echo "$usage"
	exit 0
fi

if [[ $1 == *meet.google.com* ]] && command -v google-chrome >/dev/null; then
	exec google-chrome --app="$1"
else
	exec /bin/xdg-open "$@"
fi
