#!/usr/bin/env bash

DIR="$(dirname "$(realpath "$0")")"

# Must be first so that local scripts are available in this file
PATH="$HOME/.local/bin:$DIR/bin:$PATH"

# Force brew cask to symlink applications to global dir
export HOMEBREW_CASK_OPTS="--appdir=/Applications"

# Use alternative npm global directory on Linux
if is-linux; then
   PATH="$HOME/.npm-global/bin:$PATH"
fi

if is-macos; then
  # https://stackoverflow.com/a/5084892/1850656
  export XDG_CONFIG_HOME="$HOME"/Library/Preferences
  export XDG_DATA_HOME="$HOME"/Library
  export XDG_CACHE_HOME="$HOME"/Library/Caches
fi

if is-wsl; then
  # For Karma tests
  export CHROME_BIN='/c/Program Files (x86)/Google/Chrome/Application/chrome.exe'

  # To connect to Docker for Windows
  export DOCKER_HOST='tcp://localhost:2375'
fi

# Set golang workspace directory
export GOPATH="$HOME/code/go"

# Add golang directory to PATH
PATH+=":$GOPATH/bin"

# Add Python directory to PATH
PATH+=":$(python3 -m site --user-base)/bin"

# Default editor
export VISUAL=emacs
export EDITOR=emacs

# Allow GPG to make prompts
export GPG_TTY=$(tty)

# Fix ansi-term support in emacs
export TERM=xterm-256color

# Tell ripgrep where to load config from
export RIPGREP_CONFIG_PATH="${XDG_CONFIG_HOME:-"$HOME"/.config}/ripgrep/config"
