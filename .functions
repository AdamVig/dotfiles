#!/bin/bash

what() {
    printf "%s\\n" "CHEAT:";
    cheat "$1";
    printf "%s\\n" "TLDR:";
    tldr "$1";
}

update() {
    printf "%s\\n" "Updating Homebrew...";
    brew update;

    printf "%s\\n" "Upgrading Homebrew formulas...";
    brew upgrade;

    printf "%s\\n" "Upgrading Homebrew Cask formulas...";
    brew cask upgrade --greedy || true;

    printf "%s\\n" "Updating npm...";
    npm i -g npm;

    printf "%s\\n" "Updating global npm...";
    npm update -g;

    printf "%s\\n" "Updating global pip packages...";
    pip list --user --outdated --format freeze | xargs -n1 pip install --upgrade --user
}

alias upgrade=update

# Create a pull request:
# - with the current GitHub user assigned
# - copy the link to the clipboard
# - open it in a browser
# - pass all other arguments directly to `hub pull-request`
pr() {
    CMD="hub pull-request --browse --copy"

    GITHUB_USER="$(git config github.user)"
    if [[ "$GITHUB_USER" ]]; then
        CMD="$CMD --assign=$GITHUB_USER"
    fi

    # Run dynamically constructed command, using $@ to pass it all arguments
    eval "$CMD $@"
}
